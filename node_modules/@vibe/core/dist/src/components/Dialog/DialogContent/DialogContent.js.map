{"version":3,"file":"DialogContent.js","sources":["../../../../../src/components/Dialog/DialogContent/DialogContent.tsx"],"sourcesContent":["import React, { cloneElement, CSSProperties, ReactElement, useCallback, useEffect, useRef } from \"react\";\nimport cx from \"classnames\";\nimport { camelCase } from \"lodash-es\";\nimport { CSSTransition } from \"react-transition-group\";\nimport { CSSTransitionProps } from \"react-transition-group/CSSTransition\";\nimport useClickOutside from \"../../../hooks/useClickOutside\";\nimport { chainFunctions, NOOP } from \"../../../utils/function-utils\";\nimport useKeyEvent from \"../../../hooks/useKeyEvent\";\nimport { VibeComponent, VibeComponentProps } from \"../../../types\";\nimport { keyCodes } from \"../../../constants\";\nimport { DialogAnimationType, DialogTriggerEvent } from \"../Dialog.types\";\nimport * as PopperJS from \"@popperjs/core\";\nimport { getStyle } from \"../../../helpers/typesciptCssModulesHelper\";\nimport styles from \"./DialogContent.module.scss\";\nimport useDisableScroll from \"../../../hooks/useDisableScroll\";\n\nconst EMPTY_OBJECT = {};\nconst ESCAPE_KEYS = [keyCodes.ESCAPE];\n\nexport interface DialogContentProps extends VibeComponentProps {\n  children?: ReactElement | ReactElement[];\n  position?: PopperJS.Placement;\n  wrapperClassName?: string;\n  isOpen?: boolean;\n  // TODO: [breaking] use type\n  startingEdge?: any;\n  animationType?: DialogAnimationType;\n  onEsc?: (event: React.KeyboardEvent) => void;\n  onMouseEnter?: (event: React.MouseEvent) => void;\n  onMouseLeave?: (event: React.MouseEvent) => void;\n  onClickOutside?: (event: React.MouseEvent, hideShowEvent: DialogTriggerEvent) => void;\n  onClick?: (event: React.MouseEvent) => void;\n  showDelay?: number;\n  styleObject?: CSSProperties;\n  isReferenceHidden?: boolean;\n  hasTooltip?: boolean;\n  containerSelector?: string;\n  disableContainerScroll?: boolean | string;\n  /**\n   * On context menu event (right click) outside of the dialog\n   * @param e\n   */\n  onContextMenu?: (e: React.MouseEvent) => void;\n  \"data-testid\"?: string;\n}\n\nexport const DialogContent: VibeComponent<DialogContentProps> = React.forwardRef(\n  (\n    {\n      onEsc = NOOP,\n      children,\n      position,\n      wrapperClassName,\n      isOpen = false,\n      startingEdge,\n      animationType = \"expand\",\n      onMouseEnter = NOOP,\n      onMouseLeave = NOOP,\n      onClickOutside = NOOP,\n      onClick = NOOP,\n      onContextMenu = NOOP,\n      showDelay,\n      styleObject = EMPTY_OBJECT,\n      isReferenceHidden,\n      hasTooltip = false,\n      containerSelector,\n      disableContainerScroll = false,\n      \"data-testid\": dataTestId\n    }: DialogContentProps,\n    forwardRef\n  ) => {\n    const ref = useRef(null);\n    const onOutSideClick = useCallback(\n      (event: React.MouseEvent) => {\n        if (isOpen) {\n          return onClickOutside(event, \"clickoutside\");\n        }\n      },\n      [isOpen, onClickOutside]\n    );\n    const overrideOnContextMenu = useCallback(\n      (event: React.MouseEvent) => {\n        if (isOpen) {\n          onContextMenu(event);\n        }\n      },\n      [isOpen, onContextMenu]\n    );\n    useKeyEvent({ keys: ESCAPE_KEYS, callback: onEsc });\n    useClickOutside({ callback: onOutSideClick, ref });\n    useClickOutside({ eventName: \"contextmenu\", callback: overrideOnContextMenu, ref });\n    const selectorToDisable = typeof disableContainerScroll === \"string\" ? disableContainerScroll : containerSelector;\n    const { disableScroll, enableScroll } = useDisableScroll(selectorToDisable);\n\n    useEffect(() => {\n      if (disableContainerScroll) {\n        if (isOpen) {\n          disableScroll();\n        } else {\n          enableScroll();\n        }\n      }\n    }, [disableContainerScroll, disableScroll, enableScroll, isOpen]);\n\n    const transitionOptions: Partial<CSSTransitionProps> = { classNames: undefined };\n\n    switch (animationType) {\n      case \"expand\":\n        transitionOptions.classNames = {\n          appear: styles.expandAppear,\n          appearActive: styles.expandAppearActive,\n          exit: styles.expandExit\n        };\n        break;\n      case \"opacity-and-slide\":\n        transitionOptions.classNames = {\n          appear: styles.opacitySlideAppear,\n          appearActive: styles.opacitySlideAppearActive\n        };\n        break;\n    }\n    return (\n      <span\n        // don't remove old classname - override from Monolith\n        className={cx(\"monday-style-dialog-content-wrapper\", styles.contentWrapper, wrapperClassName)}\n        ref={forwardRef}\n        data-testid={dataTestId}\n        style={styleObject}\n        onClickCapture={onClick}\n        data-popper-reference-hidden={isReferenceHidden}\n      >\n        <CSSTransition {...transitionOptions} in={isOpen} appear={!!animationType} timeout={showDelay}>\n          <div\n            className={cx(styles.contentComponent, getStyle(styles, camelCase(position)), {\n              [getStyle(styles, camelCase(\"edge-\" + startingEdge))]: startingEdge,\n              [styles.hasTooltip]: hasTooltip\n            })}\n            ref={ref}\n          >\n            {React.Children.toArray(children).map((child: ReactElement) => {\n              return cloneElement(child, {\n                onMouseEnter: chainFunctions([child.props.onMouseEnter, onMouseEnter]),\n                onMouseLeave: chainFunctions([child.props.onMouseLeave, onMouseLeave])\n              });\n            })}\n          </div>\n        </CSSTransition>\n      </span>\n    );\n  }\n);\n"],"names":["EMPTY_OBJECT","ESCAPE_KEYS","keyCodes","ESCAPE","DialogContent","React","forwardRef","_ref","_ref$onEsc","onEsc","NOOP","children","position","wrapperClassName","_ref$isOpen","isOpen","startingEdge","_ref$animationType","animationType","_ref$onMouseEnter","onMouseEnter","_ref$onMouseLeave","onMouseLeave","_ref$onClickOutside","onClickOutside","_ref$onClick","onClick","_ref$onContextMenu","onContextMenu","showDelay","_ref$styleObject","styleObject","isReferenceHidden","_ref$hasTooltip","hasTooltip","containerSelector","_ref$disableContainer","disableContainerScroll","dataTestId","ref","useRef","onOutSideClick","useCallback","event","overrideOnContextMenu","useKeyEvent","keys","callback","useClickOutside","eventName","_useDisableScroll","useDisableScroll","disableScroll","enableScroll","useEffect","transitionOptions","classNames","undefined","appear","styles","expandAppear","appearActive","expandAppearActive","exit","expandExit","opacitySlideAppear","opacitySlideAppearActive","createElement","className","cx","contentWrapper","style","onClickCapture","CSSTransition","Object","assign","in","timeout","contentComponent","getStyle","camelCase","_defineProperty","Children","toArray","map","child","cloneElement","chainFunctions","props"],"mappings":"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"}