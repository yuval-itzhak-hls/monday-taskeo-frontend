{"version":3,"file":"MenuItemSubMenu.js","sources":["../../../../../../../src/components/Menu/MenuItem/components/MenuItemSubMenu/MenuItemSubMenu.tsx"],"sourcesContent":["import React, { useMemo, useRef } from \"react\";\nimport DialogContentContainer from \"../../../../DialogContentContainer/DialogContentContainer\";\nimport usePopover from \"../../../../../hooks/usePopover\";\nimport { MenuChild } from \"../../../Menu/MenuConstants\";\nimport { MenuItemSubMenuProps } from \"./MenuItemSubMenu.types\";\nimport { Placement } from \"../../../../../hooks/popoverConstants\";\nimport useIsomorphicLayoutEffect from \"../../../../../hooks/ssr/useIsomorphicLayoutEffect\";\n\nconst MenuItemSubMenu = ({\n  anchorRef,\n  open,\n  autoFocusOnMount,\n  onClose,\n  children,\n  submenuPosition,\n  autoAdjustOnSubMenuContentResize\n}: MenuItemSubMenuProps) => {\n  const childRef = useRef<HTMLDivElement>(null);\n  const popperElementRef = useRef<HTMLDivElement>(null);\n\n  useIsomorphicLayoutEffect(() => {\n    if (!autoFocusOnMount || !open || !childRef?.current) {\n      return;\n    }\n    requestAnimationFrame(() => {\n      childRef.current.focus();\n    });\n  }, [autoFocusOnMount, open]);\n\n  const submenuPlacement = useMemo(\n    () => (submenuPosition === \"left\" ? Placement.LEFT_START : undefined),\n    [submenuPosition]\n  );\n\n  const { styles: popoverStyles, attributes: popoverAttributes } = usePopover(\n    anchorRef?.current,\n    popperElementRef?.current,\n    {\n      isOpen: open,\n      placement: submenuPlacement,\n      observeContentResize: autoAdjustOnSubMenuContentResize\n    }\n  );\n\n  const subMenu: MenuChild = children && React.Children.only(children);\n  if (!subMenu?.type?.isMenu) {\n    console.error(\"MenuItem can accept only Menu element as first level child, this element is not valid: \", subMenu);\n    return null;\n  }\n\n  return (\n    <div\n      style={{ ...popoverStyles.popper, visibility: open ? \"visible\" : \"hidden\" }}\n      {...popoverAttributes.popper}\n      ref={popperElementRef}\n    >\n      {subMenu && open && (\n        <DialogContentContainer>\n          {React.cloneElement(subMenu, {\n            ...subMenu?.props,\n            isVisible: open,\n            isSubMenu: true,\n            onClose,\n            ref: childRef,\n            useDocumentEventListeners: !autoFocusOnMount\n          })}\n        </DialogContentContainer>\n      )}\n    </div>\n  );\n};\n\nexport default MenuItemSubMenu;\n"],"names":["MenuItemSubMenu","_ref","anchorRef","open","autoFocusOnMount","onClose","children","submenuPosition","autoAdjustOnSubMenuContentResize","childRef","useRef","popperElementRef","useIsomorphicLayoutEffect","current","requestAnimationFrame","focus","submenuPlacement","useMemo","Placement","LEFT_START","undefined","_usePopover","usePopover","isOpen","placement","observeContentResize","popoverStyles","styles","popoverAttributes","attributes","subMenu","React","Children","only","_a","type","isMenu","createElement","Object","assign","style","popper","visibility","ref","DialogContentContainer","cloneElement","props","isVisible","isSubMenu","useDocumentEventListeners","console","error"],"mappings":"uTAQA,IAAMA,EAAkB,SAAHC,GAQM,MAPzBC,EAASD,EAATC,UACAC,EAAIF,EAAJE,KACAC,EAAgBH,EAAhBG,iBACAC,EAAOJ,EAAPI,QACAC,EAAQL,EAARK,SACAC,EAAeN,EAAfM,gBACAC,EAAgCP,EAAhCO,iCAEMC,EAAWC,EAAuB,MAClCC,EAAmBD,EAAuB,MAEhDE,GAA0B,WACnBR,GAAqBD,IAASM,aAAA,EAAAA,EAAUI,UAG7CC,uBAAsB,WACpBL,EAASI,QAAQE,OACnB,GACF,GAAG,CAACX,EAAkBD,IAEtB,IAAMa,EAAmBC,GACvB,WAAA,MAA2B,SAApBV,EAA6BW,EAAUC,gBAAaC,CAAS,GACpE,CAACb,IAGHc,EAAiEC,EAC/DpB,aAAA,EAAAA,EAAWW,QACXF,aAAA,EAAAA,EAAkBE,QAClB,CACEU,OAAQpB,EACRqB,UAAWR,EACXS,qBAAsBjB,IANVkB,EAAaL,EAArBM,OAAmCC,EAAiBP,EAA7BQ,WAUzBC,EAAqBxB,GAAYyB,EAAMC,SAASC,KAAK3B,GAC3D,OAAoB,QAAf4B,EAAAJ,aAAA,EAAAA,EAASK,YAAM,IAAAD,OAAA,EAAAA,EAAAE,QAMlBL,EAAAM,cAAA,MAAAC,OAAAC,OAAA,CACEC,MAAKF,OAAAC,OAAAD,OAAAC,OAAA,GAAOb,EAAce,QAAQ,CAAAC,WAAYvC,EAAO,UAAY,YAC7DyB,EAAkBa,QACtBE,IAAKhC,IAEJmB,GAAW3B,GACV4B,gBAACa,EAAsB,KACpBb,EAAMc,aAAaf,EAAOQ,OAAAC,OAAAD,OAAAC,OAAA,CAAA,EACtBT,aAAA,EAAAA,EAASgB,OAAK,CACjBC,UAAW5C,EACX6C,WAAW,EACX3C,QAAAA,EACAsC,IAAKlC,EACLwC,2BAA4B7C,QAlBpC8C,QAAQC,MAAM,0FAA2FrB,GAClG,KAuBX"}