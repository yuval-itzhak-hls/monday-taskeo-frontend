{"version":3,"file":"useMenuItemMouseEvents.js","sources":["../../../../../../src/components/Menu/MenuItem/hooks/useMenuItemMouseEvents.ts"],"sourcesContent":["import { RefObject } from \"react\";\nimport useIsMouseEnter from \"../../../../hooks/useIsMouseEnter\";\nimport usePrevious from \"../../../../hooks/usePrevious\";\nimport useIsomorphicLayoutEffect from \"../../../../hooks/ssr/useIsomorphicLayoutEffect\";\n\nexport default function useMenuItemMouseEvents({\n  ref,\n  resetOpenSubMenuIndex,\n  setSubMenuIsOpenByIndex,\n  isActive,\n  setActiveItemIndex,\n  index,\n  hasChildren,\n  splitMenuItemIconButtonRef,\n  splitMenuItem = false\n}: {\n  ref: RefObject<HTMLElement>;\n  resetOpenSubMenuIndex: () => void;\n  setSubMenuIsOpenByIndex: (index: number, isOpen: boolean) => void;\n  isActive: boolean;\n  setActiveItemIndex: (index: number) => void;\n  index: number;\n  hasChildren: boolean;\n  splitMenuItemIconButtonRef?: React.RefObject<HTMLElement>;\n  splitMenuItem?: boolean;\n}) {\n  const isMouseEnter = useIsMouseEnter({ ref });\n  const isMouseEnterOnIconButton = useIsMouseEnter({ ref: splitMenuItemIconButtonRef });\n  const prevIsMouseEnter = usePrevious(isMouseEnter);\n  const prevIsMouseEnterOnIconButton = usePrevious(isMouseEnterOnIconButton);\n\n  useIsomorphicLayoutEffect(() => {\n    if (!isMouseEnterOnIconButton) return;\n\n    if (isMouseEnterOnIconButton === prevIsMouseEnterOnIconButton) return;\n\n    if (isActive) {\n      setSubMenuIsOpenByIndex(index, true);\n    } else {\n      resetOpenSubMenuIndex();\n    }\n  }, [\n    setSubMenuIsOpenByIndex,\n    index,\n    isMouseEnterOnIconButton,\n    prevIsMouseEnterOnIconButton,\n    isActive,\n    resetOpenSubMenuIndex\n  ]);\n\n  useIsomorphicLayoutEffect(() => {\n    if (!isMouseEnter) return;\n    if (isMouseEnter === prevIsMouseEnter) return;\n\n    if (!setSubMenuIsOpenByIndex || !resetOpenSubMenuIndex) {\n      console.error(\"MenuItem must be a first level child of a menu\");\n      return;\n    }\n\n    resetOpenSubMenuIndex();\n\n    if (!isActive && !splitMenuItem) {\n      setActiveItemIndex(index);\n      if (hasChildren) {\n        setSubMenuIsOpenByIndex(index, true);\n      } else {\n        resetOpenSubMenuIndex();\n      }\n    }\n\n    if (isActive && hasChildren) {\n      setSubMenuIsOpenByIndex(index, !!isMouseEnter);\n    }\n\n    if (!isActive && splitMenuItem) {\n      setActiveItemIndex(index);\n\n      if (isMouseEnterOnIconButton) {\n        setSubMenuIsOpenByIndex(index, true);\n      }\n    }\n  }, [\n    resetOpenSubMenuIndex,\n    prevIsMouseEnter,\n    isMouseEnter,\n    isMouseEnterOnIconButton,\n    setSubMenuIsOpenByIndex,\n    isActive,\n    setActiveItemIndex,\n    index,\n    hasChildren,\n    splitMenuItem\n  ]);\n\n  return isMouseEnter;\n}\n"],"names":["useMenuItemMouseEvents","_ref","resetOpenSubMenuIndex","setSubMenuIsOpenByIndex","isActive","setActiveItemIndex","index","hasChildren","splitMenuItemIconButtonRef","_ref$splitMenuItem","splitMenuItem","isMouseEnter","useIsMouseEnter","ref","isMouseEnterOnIconButton","prevIsMouseEnter","usePrevious","prevIsMouseEnterOnIconButton","useIsomorphicLayoutEffect","console","error"],"mappings":"4KAKc,SAAUA,EAAsBC,GAoB7C,IAlBCC,EAAqBD,EAArBC,sBACAC,EAAuBF,EAAvBE,wBACAC,EAAQH,EAARG,SACAC,EAAkBJ,EAAlBI,mBACAC,EAAKL,EAALK,MACAC,EAAWN,EAAXM,YACAC,EAA0BP,EAA1BO,2BAA0BC,EAAAR,EAC1BS,cAAAA,OAAgB,IAAHD,GAAQA,EAYfE,EAAeC,EAAgB,CAAEC,IApBpCZ,EAAHY,MAqBMC,EAA2BF,EAAgB,CAAEC,IAAKL,IAClDO,EAAmBC,EAAYL,GAC/BM,EAA+BD,EAAYF,GAiEjD,OA/DAI,GAA0B,WACnBJ,GAEDA,IAA6BG,IAE7Bb,EACFD,EAAwBG,GAAO,GAE/BJ,IAEJ,GAAG,CACDC,EACAG,EACAQ,EACAG,EACAb,EACAF,IAGFgB,GAA0B,WACnBP,GACDA,IAAiBI,IAEhBZ,GAA4BD,GAKjCA,IAEKE,GAAaM,IAChBL,EAAmBC,GACfC,EACFJ,EAAwBG,GAAO,GAE/BJ,KAIAE,GAAYG,GACdJ,EAAwBG,IAASK,IAG9BP,GAAYM,IACfL,EAAmBC,GAEfQ,GACFX,EAAwBG,GAAO,KAvBjCa,QAAQC,MAAM,kDA0BjB,GAAE,CACDlB,EACAa,EACAJ,EACAG,EACAX,EACAC,EACAC,EACAC,EACAC,EACAG,IAGKC,CACT"}