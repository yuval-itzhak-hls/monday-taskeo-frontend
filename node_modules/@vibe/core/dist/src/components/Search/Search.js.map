{"version":3,"file":"Search.js","sources":["../../../../src/components/Search/Search.tsx"],"sourcesContent":["import cx from \"classnames\";\nimport React, { forwardRef, useCallback, useRef } from \"react\";\nimport useMergeRef from \"../../hooks/useMergeRef\";\nimport { CloseSmall as CloseSmallIcon, Search as SearchIcon } from \"@vibe/icons\";\nimport { ComponentDefaultTestId, getTestId } from \"../../tests/test-ids-utils\";\nimport styles from \"./Search.module.scss\";\nimport BaseInput from \"../BaseInput/BaseInput\";\nimport useDebounceEvent from \"../../hooks/useDebounceEvent\";\nimport IconButton from \"../IconButton/IconButton\";\nimport Icon from \"../Icon/Icon\";\nimport { SearchProps } from \"./Search.types\";\nimport Loader from \"../Loader/Loader\";\n\nconst Search = forwardRef(\n  (\n    {\n      searchIconName = SearchIcon,\n      clearIconName = CloseSmallIcon,\n      clearIconLabel = \"Clear\",\n      renderAction: RenderAction,\n      hideRenderActionOnInput,\n      value,\n      placeholder,\n      size = \"medium\",\n      disabled,\n      loading,\n      autoFocus,\n      autoComplete = \"off\",\n      inputAriaLabel,\n      debounceRate = 400,\n      searchResultsContainerId,\n      currentAriaResultId,\n      onChange,\n      onFocus,\n      onBlur,\n      onClear,\n      onKeyDown,\n      className,\n      ariaExpanded,\n      ariaHasPopup,\n      id,\n      \"data-testid\": dataTestId\n    }: SearchProps,\n    ref: React.ForwardedRef<HTMLInputElement>\n  ) => {\n    const inputRef = useRef(null);\n    const mergedRef = useMergeRef(ref, inputRef);\n\n    const { inputValue, onEventChanged, clearValue } = useDebounceEvent({\n      delay: debounceRate,\n      onChange,\n      initialStateValue: value\n    });\n\n    const onClearButtonClick = useCallback(() => {\n      if (disabled) return;\n      inputRef.current?.focus?.();\n      clearValue();\n      onClear?.();\n    }, [disabled, clearValue, onClear]);\n\n    const SearchIcon = (\n      <Icon\n        icon={searchIconName}\n        className={styles.icon}\n        iconType=\"font\"\n        iconSize={size === \"small\" ? \"16px\" : \"20px\"}\n      />\n    );\n\n    const ClearIcon = (\n      <IconButton\n        className={cx(styles.icon, { [styles.empty]: !inputValue })}\n        icon={clearIconName}\n        ariaLabel={clearIconLabel}\n        onClick={onClearButtonClick}\n        size={size === \"small\" ? \"xs\" : \"small\"}\n        data-testid={getTestId(ComponentDefaultTestId.CLEAN_SEARCH_BUTTON, id)}\n      />\n    );\n\n    const RenderRight = (\n      <>\n        {loading && (\n          <Loader\n            size={size === \"small\" ? \"xs\" : 20}\n            color=\"secondary\"\n            wrapperClassName={cx({ [styles.loader]: !inputValue && !RenderAction })}\n          />\n        )}\n        {inputValue && !disabled && ClearIcon}\n        {!(hideRenderActionOnInput && inputValue) && RenderAction}\n      </>\n    );\n\n    return (\n      <BaseInput\n        ref={mergedRef}\n        id={id}\n        type={\"search\"}\n        data-testid={dataTestId || getTestId(ComponentDefaultTestId.SEARCH, id)}\n        className={cx(styles.searchWrapper, className)}\n        inputClassName={styles.search}\n        value={inputValue}\n        renderLeft={SearchIcon}\n        renderRight={RenderRight}\n        autoFocus={autoFocus}\n        placeholder={placeholder}\n        disabled={disabled}\n        onChange={onEventChanged}\n        onBlur={onBlur}\n        onFocus={onFocus}\n        onKeyDown={onKeyDown}\n        autoComplete={autoComplete}\n        size={size}\n        wrapperRole=\"search\"\n        inputRole={searchResultsContainerId ? \"combobox\" : undefined}\n        aria-label={inputAriaLabel}\n        aria-busy={loading}\n        aria-controls={ariaExpanded ? searchResultsContainerId : undefined}\n        aria-activedescendant={currentAriaResultId}\n        aria-haspopup={ariaHasPopup}\n        aria-expanded={ariaExpanded}\n      />\n    );\n  }\n);\n\nexport default Search;\n"],"names":["Search","forwardRef","_ref","ref","inputRef","mergedRef","_useDebounceEvent","inputValue","onEventChanged","clearValue","onClearButtonClick","SearchIcon","ClearIcon","RenderRight","_ref$searchIconName","searchIconName","_ref$clearIconName","clearIconName","CloseSmallIcon","_ref$clearIconLabel","clearIconLabel","RenderAction","renderAction","hideRenderActionOnInput","value","placeholder","_ref$size","size","disabled","loading","autoFocus","_ref$autoComplete","autoComplete","inputAriaLabel","_ref$debounceRate","debounceRate","searchResultsContainerId","currentAriaResultId","onChange","onFocus","onBlur","onClear","onKeyDown","className","ariaExpanded","ariaHasPopup","id","dataTestId","useRef","useMergeRef","useDebounceEvent","delay","initialStateValue","useCallback","_b","current","_a","focus","React","createElement","Icon","icon","styles","iconType","iconSize","IconButton","cx","_defineProperty","empty","ariaLabel","onClick","getTestId","ComponentDefaultTestId","CLEAN_SEARCH_BUTTON","Fragment","Loader","color","wrapperClassName","loader","BaseInput","type","SEARCH","searchWrapper","inputClassName","search","renderLeft","renderRight","wrapperRole","inputRole","undefined"],"mappings":"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"}