{"version":3,"file":"Label.js","sources":["../../../../src/components/Label/Label.tsx"],"sourcesContent":["import { camelCase } from \"lodash-es\";\nimport cx from \"classnames\";\nimport { ComponentDefaultTestId, getTestId } from \"../../tests/test-ids-utils\";\nimport { getStyle } from \"../../helpers/typesciptCssModulesHelper\";\nimport React, { forwardRef, useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport Text from \"../Text/Text\";\nimport Leg from \"./Leg\";\nimport { LabelColor as LabelColorEnum, LabelKind as LabelKindEnum, mapSizesToTextSize } from \"./LabelConstants\";\nimport { LabelColor, LabelKind } from \"./Label.types\";\nimport { VibeComponent, VibeComponentProps, withStaticProps } from \"../../types\";\nimport useClickableProps from \"../../hooks/useClickableProps/useClickableProps\";\nimport useMergeRef from \"../../hooks/useMergeRef\";\nimport styles from \"./Label.module.scss\";\nimport LabelCelebrationAnimation from \"./LabelCelebrationAnimation\";\nimport { LabelSizes } from \"./Label.types\";\n\nexport interface LabelProps extends VibeComponentProps {\n  /**\n   * Class name for an inner text wrapper\n   */\n  labelClassName?: string;\n  kind?: LabelKind;\n  color?: LabelColor;\n  text?: string;\n  isLegIncluded?: boolean;\n  onClick?: (event: React.MouseEvent<HTMLSpanElement, MouseEvent>) => void;\n  celebrationAnimation?: boolean;\n  size?: LabelSizes;\n}\n\nconst Label: VibeComponent<LabelProps> & {\n  colors?: typeof LabelColorEnum;\n  kinds?: typeof LabelKindEnum;\n} = forwardRef<HTMLElement, LabelProps>(\n  (\n    {\n      className,\n      labelClassName,\n      kind = \"fill\",\n      color = \"primary\",\n      text = \"\",\n      isLegIncluded = false,\n      id,\n      \"data-testid\": dataTestId,\n      onClick,\n      celebrationAnimation,\n      size = \"medium\"\n    }: LabelProps,\n    ref\n  ) => {\n    const labelRef = useRef<HTMLSpanElement>(null);\n    const mergedRef = useMergeRef(ref, labelRef);\n    const [isCelebrationAnimation, setIsCelebrationAnimation] = useState(celebrationAnimation);\n\n    const isClickable = Boolean(onClick);\n\n    const classNames = useMemo(\n      () =>\n        cx(\n          styles.label,\n          getStyle(styles, camelCase(\"kind\" + \"-\" + kind)),\n          getStyle(styles, camelCase(\"color\" + \"-\" + color)),\n          {\n            [styles.withLeg]: isLegIncluded,\n            [styles.clickable]: isClickable,\n            [styles.small]: size === \"small\"\n          },\n          labelClassName\n        ),\n      [kind, color, isLegIncluded, labelClassName, isClickable, size]\n    );\n\n    const onClickCallback = useCallback(\n      (event: React.MouseEvent<HTMLSpanElement, MouseEvent>) => {\n        if (onClick) {\n          event.preventDefault();\n          onClick(event);\n        }\n      },\n      [onClick]\n    );\n\n    const clickableProps = useClickableProps(\n      {\n        onClick: onClickCallback,\n        id,\n        ariaHidden: false,\n        ariaHasPopup: false,\n        ariaExpanded: false\n      },\n      labelRef\n    );\n\n    useEffect(() => {\n      setIsCelebrationAnimation(celebrationAnimation);\n    }, [celebrationAnimation]);\n\n    const label = useMemo(() => {\n      return (\n        <span\n          {...(isClickable && clickableProps)}\n          className={cx({ [styles.clickableWrapper]: isClickable }, className)}\n          data-testid={dataTestId || getTestId(ComponentDefaultTestId.LABEL, id)}\n          ref={mergedRef}\n        >\n          <Text\n            element=\"span\"\n            type={mapSizesToTextSize[size]}\n            className={classNames}\n            color=\"onInverted\"\n            data-celebration-text={isCelebrationAnimation}\n          >\n            <Text\n              element=\"span\"\n              type={mapSizesToTextSize[size]}\n              color=\"inherit\"\n              className={cx({ [styles.smallText]: size === \"small\" })}\n            >\n              {text}\n            </Text>\n            <span className={cx(styles.legWrapper)}>{isLegIncluded ? <Leg /> : null}</span>\n          </Text>\n        </span>\n      );\n    }, [\n      isClickable,\n      clickableProps,\n      className,\n      dataTestId,\n      id,\n      mergedRef,\n      classNames,\n      isCelebrationAnimation,\n      text,\n      isLegIncluded,\n      size\n    ]);\n\n    // Celebration animation is applied only for line kind\n    if (isCelebrationAnimation && kind === \"line\") {\n      return (\n        <LabelCelebrationAnimation onAnimationEnd={() => setIsCelebrationAnimation(false)}>\n          {label}\n        </LabelCelebrationAnimation>\n      );\n    }\n\n    return label;\n  }\n);\n\nexport default withStaticProps(Label, {\n  colors: LabelColorEnum,\n  kinds: LabelKindEnum\n});\n"],"names":["withStaticProps","forwardRef","_ref","ref","className","labelClassName","_ref$kind","kind","_ref$color","color","_ref$text","text","_ref$isLegIncluded","isLegIncluded","id","dataTestId","onClick","celebrationAnimation","_ref$size","size","labelRef","useRef","mergedRef","useMergeRef","_useState","useState","_useState2","_slicedToArray","isCelebrationAnimation","setIsCelebrationAnimation","isClickable","classNames","useMemo","cx","styles","label","getStyle","camelCase","_defineProperty","withLeg","clickable","small","onClickCallback","useCallback","event","preventDefault","clickableProps","useClickableProps","ariaHidden","ariaHasPopup","ariaExpanded","useEffect","React","createElement","Object","assign","clickableWrapper","getTestId","ComponentDefaultTestId","LABEL","Text","element","type","mapSizesToTextSize","smallText","legWrapper","Leg","LabelCelebrationAnimation","onAnimationEnd","colors","LabelColorEnum","kinds","LabelKindEnum"],"mappings":"41BA8BA,IAyHeA,EAAAA,EAtHXC,GACF,SAAAC,EAcEC,GACE,IAbAC,EAASF,EAATE,UACAC,EAAcH,EAAdG,eAAcC,EAAAJ,EACdK,KAAAA,OAAO,IAAHD,EAAG,OAAMA,EAAAE,EAAAN,EACbO,MAAAA,OAAQ,IAAHD,EAAG,UAASA,EAAAE,EAAAR,EACjBS,KAAAA,OAAO,IAAHD,EAAG,GAAEA,EAAAE,EAAAV,EACTW,cAAAA,OAAgB,IAAHD,GAAQA,EACrBE,EAAEZ,EAAFY,GACeC,EAAUb,EAAzB,eACAc,EAAOd,EAAPc,QACAC,EAAoBf,EAApBe,qBAAoBC,EAAAhB,EACpBiB,KAAAA,OAAO,IAAHD,EAAG,SAAQA,EAIXE,EAAWC,EAAwB,MACnCC,EAAYC,EAAYpB,EAAKiB,GACnCI,EAA4DC,EAASR,GAAqBS,EAAAC,EAAAH,EAAA,GAAnFI,EAAsBF,EAAA,GAAEG,EAAyBH,EAAA,GAElDI,IAAsBd,EAEtBe,EAAaC,GACjB,WAAA,OACEC,EACEC,EAAOC,MACPC,EAASF,EAAQG,EAAU,QAAe9B,IAC1C6B,EAASF,EAAQG,EAAU,SAAgB5B,IAAO6B,EAAAA,EAAAA,EAAA,CAAA,EAE/CJ,EAAOK,QAAU1B,GACjBqB,EAAOM,UAAYV,GACnBI,EAAOO,MAAiB,UAATtB,GAElBd,EACD,GACH,CAACE,EAAME,EAAOI,EAAeR,EAAgByB,EAAaX,IAGtDuB,EAAkBC,GACtB,SAACC,GACK5B,IACF4B,EAAMC,iBACN7B,EAAQ4B,GAEZ,GACA,CAAC5B,IAGG8B,EAAiBC,EACrB,CACE/B,QAAS0B,EACT5B,GAAAA,EACAkC,YAAY,EACZC,cAAc,EACdC,cAAc,GAEhB9B,GAGF+B,GAAU,WACRtB,EAA0BZ,EAC5B,GAAG,CAACA,IAEJ,IAAMkB,EAAQH,GAAQ,WACpB,OACEoB,EACMC,cAAA,OAAAC,OAAAC,OAAA,CAAA,EAACzB,GAAegB,EAAe,CACnC1C,UAAW6B,EAAEK,EAAIJ,CAAAA,EAAAA,EAAOsB,iBAAmB1B,GAAe1B,GAC7C,cAAAW,GAAc0C,EAAUC,EAAuBC,MAAO7C,GACnEX,IAAKmB,IAEL8B,EAACC,cAAAO,GACCC,QAAQ,OACRC,KAAMC,EAAmB5C,GACzBf,UAAW2B,EACXtB,MAAM,aAAY,wBACKmB,GAEvBwB,EAAAC,cAACO,EAAI,CACHC,QAAQ,OACRC,KAAMC,EAAmB5C,GACzBV,MAAM,UACNL,UAAW6B,EAAEK,EAAIJ,CAAAA,EAAAA,EAAO8B,UAAqB,UAAT7C,KAEnCR,GAEHyC,EAAMC,cAAA,OAAA,CAAAjD,UAAW6B,EAAGC,EAAO+B,aAAcpD,EAAgBuC,EAACC,cAAAa,EAAM,MAAG,OAI1E,GAAE,CACDpC,EACAgB,EACA1C,EACAW,EACAD,EACAQ,EACAS,EACAH,EACAjB,EACAE,EACAM,IAIF,OAAIS,GAAmC,SAATrB,EAE1B6C,EAACC,cAAAc,EAA0B,CAAAC,eAAgB,WAAA,OAAMvC,GAA0B,EAAM,GAC9EM,GAKAA,CACT,IAGoC,CACpCkC,OAAQC,EACRC,MAAOC"}