import{slicedToArray as o,defineProperty as e,toConsumableArray as t}from"../../../_virtual/_rollupPluginBabelHelpers.js";import{__rest as i}from"../../../_virtual/_tslib.js";import{camelCase as n}from"lodash-es";import{getStyle as a}from"../../helpers/typesciptCssModulesHelper.js";import{getTestId as r,ComponentDefaultTestId as s}from"../../tests/testIds.js";import l from"classnames";import d,{useState as c,useRef as m,useCallback as u,useMemo as g}from"react";import{SplitButtonSecondaryContentPosition as p,ENTER_KEYS as f,DEFAULT_DIALOG_SHOW_TRIGGER as D,DEFAULT_DIALOG_HIDE_TRIGGER as v,DIALOG_MOVE_BY as y,SECONDARY_BUTTON_ARIA_LABEL as C,SECONDARY_BUTTON_WRAPPER_CLASSNAME as b}from"./SplitButtonConstants.js";import{withStaticProps as h}from"../../types/withStaticProps.js";import"../../utils/colors-vars-map.js";import{HideShowEvent as N,AnimationType as S}from"../Dialog/DialogConstants.js";import{NOOP as k}from"../../utils/function-utils.js";import{isInsideClass as P}from"../../utils/dom-utils.js";import j from"../../hooks/useKeyEvent/index.js";import I from"../../hooks/useEventListener/index.js";import T from"../Button/Button.js";import E from"../Dialog/Dialog.js";import B from"../DialogContentContainer/DialogContentContainer.js";import O from"./SplitButton.module.scss.js";import z from"../../../icons/dist/react/DropdownChevronDown.js";var _=function(p){var h=p.secondaryDialogContent,_=p.onSecondaryDialogDidShow,w=void 0===_?k:_,L=p.onSecondaryDialogDidHide,x=void 0===L?k:L,A=p.shouldCloseOnClickInsideDialog,H=p.zIndex,R=void 0===H?null:H,U=p.secondaryDialogClassName,M=p.secondaryDialogPosition,F=void 0===M?"bottom-start":M,K=p.dialogContainerSelector,W=p.dialogPaddingSize,Y=void 0===W?B.sizes.MEDIUM:W,V=p.disabled,X=p.loading,q=p.kind,G=p.color,J=p.className,Q=p.leftIcon,Z=p.rightIcon,$=p.onClick,oo=p.children,eo=p.marginLeft,to=p.marginRight,io=p.active,no=p.id,ao=p["data-testid"],ro=i(p,["secondaryDialogContent","onSecondaryDialogDidShow","onSecondaryDialogDidHide","shouldCloseOnClickInsideDialog","zIndex","secondaryDialogClassName","secondaryDialogPosition","dialogContainerSelector","dialogPaddingSize","disabled","success","loading","kind","color","className","leftIcon","rightIcon","onClick","children","marginLeft","marginRight","active","id","data-testid"]),so=c(!1),lo=o(so,2),co=lo[0],mo=lo[1],uo=c(!1),go=o(uo,2),po=go[0],fo=go[1],Do=c(!1),vo=o(Do,2),yo=vo[0],Co=vo[1],bo=m(null),ho=m(null),No=u((function(){return fo(!0)}),[fo]),So=u((function(){return fo(!1)}),[fo]),ko=u((function(o){return!V&&!P(o.target,b)}),[V]),Po=u((function(o){ko(o)&&Co(!0)}),[Co,ko]),jo=u((function(){return Co(!1)}),[Co]),Io=u((function(o){ko(o)&&Co(!0)}),[Co,ko]),To=u((function(){mo(!0),w()}),[mo,w]),Eo=u((function(o,e){mo(!1),x(),"esckey"===e&&ho.current.focus()}),[mo,x]);I({eventName:"mouseenter",callback:No,ref:bo}),I({eventName:"mouseleave",callback:So,ref:bo}),I({eventName:"mousedown",callback:Po,ref:bo}),I({eventName:"mouseup",callback:jo,ref:bo}),I({eventName:"transitionend",callback:jo,ref:bo}),j({keys:f,ref:bo,callback:Io});var Bo=g((function(){return l(O.button,a(O,n("kind-"+q)),a(O,n("color-"+G)),e(e(e(e(e({},O.mainActive,io),O.active,yo),O.splitContentOpen,co),O.hovered,po),O.disabled,V),J)}),[J,q,G,io,yo,co,po,V]),Oo=g((function(){return V?[]:D}),[V]),zo=g((function(){return A?[].concat(t(v),[N.CONTENT_CLICK]):v}),[A]),_o=u((function(){var o="function"==typeof h?h():h;return d.createElement(B,{type:B.types.POPOVER,size:Y},o)}),[h,Y]),wo=g((function(){return"bottom"===F?"":"bottom-start"===F?"bottom":"top"}),[F]);return d.createElement("div",{className:Bo,ref:bo,id:no,"data-testid":ao||r(s.SPLIT_BUTTON,no)},d.createElement(T,Object.assign({},ro,{preventClickAnimation:!0,leftIcon:Q,rightIcon:Z,rightFlat:!0,color:G,kind:q,active:io,onClick:$,className:O.mainButton,marginLeft:eo,onFocus:No,onBlur:So,disabled:V,loading:X,"data-testid":r(s.SPLIT_BUTTON_PRIMARY_BUTTON,no)}),oo),d.createElement("div",{className:O.secondaryButtonWrapper},d.createElement(E,{wrapperClassName:U,zIndex:R,content:_o,position:F,containerSelector:K,startingEdge:wo,animationType:S.EXPAND,moveBy:y,onDialogDidShow:To,onDialogDidHide:Eo,showTrigger:Oo,hideTrigger:zo},d.createElement(T,Object.assign({},ro,{ref:ho,preventClickAnimation:!0,leftFlat:!0,noSidePadding:!0,color:G,kind:q,className:O.secondaryButton,active:co,marginRight:to,onFocus:No,onBlur:So,disabled:V,ariaLabel:C,ariaHasPopup:!0,ariaExpanded:co,"data-testid":r(s.SPLIT_BUTTON_SECONDARY_BUTTON,no)}),d.createElement("div",{className:O.secondaryButtonIconWrapper},d.createElement(z,{"aria-hidden":"true"}))))))};_.defaultProps=Object.assign(Object.assign({},T.defaultProps),{onSecondaryDialogDidShow:k,onSecondaryDialogDidHide:k,zIndex:null,secondaryDialogClassName:"",secondaryDialogPosition:"bottom-start",dialogPaddingSize:B.sizes.MEDIUM});var w=h(_,{secondaryPositions:p,secondaryDialogPositions:p,sizes:T.sizes,colors:T.colors,kinds:T.kinds,inputTags:T.inputTags,dialogPaddingSizes:B.sizes});export{w as default};
//# sourceMappingURL=SplitButton.js.map
