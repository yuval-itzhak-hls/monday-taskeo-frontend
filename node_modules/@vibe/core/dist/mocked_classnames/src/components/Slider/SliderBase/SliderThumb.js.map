{"version":3,"file":"SliderThumb.js","sources":["../../../../../../src/components/Slider/SliderBase/SliderThumb.tsx"],"sourcesContent":["import React, { FC, useEffect, useRef } from \"react\";\nimport { NOOP } from \"../../../utils/function-utils\";\nimport Tooltip from \"../../Tooltip/Tooltip\";\nimport { TOOLTIP_SHOW_DELAY } from \"../SliderConstants\";\nimport { useSliderActions, useSliderSelection, useSliderUi } from \"../SliderContext\";\nimport VibeComponentProps from \"../../../types/VibeComponentProps\";\nimport cx from \"classnames\";\nimport styles from \"./SliderThumb.module.scss\";\nimport { getStyle } from \"../../../helpers/typesciptCssModulesHelper\";\nimport { SliderColor, SliderSize } from \"../Slider.types\";\nimport { camelCase } from \"lodash-es\";\n\nexport interface SliderThumbProps extends VibeComponentProps {\n  /**\n   * Consumer/Custom/Extra `class names` to be added to the Component's-Root-Node\n   */\n  className?: string;\n  /**\n   * Consumer/Custom/Extra `class names` to be added to the Component's-Root-Node\n   */\n  index?: number;\n  /**\n   * On SliderThumb move callback\n   */\n  onMove?: (event: PointerEvent) => void;\n  /**\n   * Position (i.e. offset) from start of track/rail, according to value\n   */\n  position?: number;\n  size: SliderSize;\n  color: SliderColor;\n}\n\nconst SliderThumb: FC<SliderThumbProps> = ({ className, index = 0, onMove = NOOP, position = 0, size, color }) => {\n  const { max, min, ranged, value: valueOrValues, valueText: valueOrValuesText } = useSliderSelection();\n  const value = ranged ? (valueOrValues as unknown as number[])[index] : (valueOrValues as number);\n  const valueText = ranged ? (valueOrValuesText as unknown as string[])[index] : (valueOrValuesText as string);\n  const {\n    active,\n    ariaLabel,\n    ariaLabelledby,\n    disabled,\n    dragging,\n    focused,\n    shapeTestId,\n    showValue,\n    valueLabelPosition,\n    valueLabelColor\n  } = useSliderUi();\n  const { setActive, setFocused, setDragging } = useSliderActions();\n  const ref = useRef(null);\n\n  function handleBlur() {\n    setFocused(null);\n    setActive(null);\n  }\n\n  function handleFocus() {\n    setFocused(index);\n    setActive(index);\n  }\n\n  function handlePointerLeave() {\n    setActive(null);\n  }\n\n  function handlePointerDown(e: React.PointerEvent) {\n    e.stopPropagation();\n    setDragging(index);\n    document.addEventListener(\"pointermove\", onMove);\n    document.addEventListener(\"pointerup\", stopMove);\n  }\n\n  function stopMove() {\n    setDragging(null);\n    document.removeEventListener(\"pointermove\", onMove);\n    document.removeEventListener(\"pointerup\", stopMove);\n  }\n\n  useEffect(() => {\n    if (focused === index && ref && ref.current) {\n      ref.current.focus();\n    }\n  }, [focused, index]);\n\n  return (\n    <Tooltip\n      open={active === index || dragging === index}\n      content={showValue ? null : valueText}\n      position=\"top\"\n      showDelay={TOOLTIP_SHOW_DELAY}\n      addKeyboardHideShowTriggersByDefault={false}\n    >\n      <div\n        aria-label={ariaLabel}\n        aria-labelledby={ariaLabelledby}\n        aria-valuemax={max}\n        aria-valuemin={min}\n        aria-valuenow={value}\n        aria-valuetext={valueText}\n        aria-disabled={disabled}\n        className={cx(\n          styles.thumb,\n          getStyle(styles, color),\n          getStyle(styles, size),\n          {\n            [styles.dragging]: dragging === index,\n            [styles.focused]: focused,\n            [styles.notDisabledThumb]: !disabled\n          },\n          className\n        )}\n        data-testid={shapeTestId(`thumb-${index}`)}\n        onFocus={handleFocus}\n        onBlur={handleBlur}\n        onPointerDown={handlePointerDown}\n        onPointerLeave={handlePointerLeave}\n        ref={ref}\n        role=\"slider\"\n        style={{ left: `${position}%` }}\n        tabIndex={disabled ? -1 : 0}\n      >\n        {showValue && (\n          <label\n            className={cx(\n              styles.label,\n              getStyle(styles, camelCase(\"color-\" + valueLabelColor)),\n              getStyle(styles, camelCase(\"position-\" + valueLabelPosition))\n            )}\n          >\n            {valueText}\n          </label>\n        )}\n      </div>\n    </Tooltip>\n  );\n};\n\nexport default SliderThumb;\n"],"names":["SliderThumb","_ref","className","_ref$index","index","_ref$onMove","onMove","NOOP","_ref$position","position","size","color","_useSliderSelection","useSliderSelection","max","min","ranged","valueOrValues","value","valueOrValuesText","valueText","_useSliderUi","useSliderUi","active","ariaLabel","ariaLabelledby","disabled","dragging","focused","shapeTestId","showValue","valueLabelPosition","valueLabelColor","_useSliderActions","useSliderActions","setActive","setFocused","setDragging","ref","useRef","stopMove","document","removeEventListener","useEffect","current","focus","React","createElement","Tooltip","open","content","showDelay","TOOLTIP_SHOW_DELAY","addKeyboardHideShowTriggersByDefault","cx","styles","thumb","getStyle","_defineProperty","notDisabledThumb","concat","onFocus","onBlur","onPointerDown","e","stopPropagation","addEventListener","onPointerLeave","role","style","left","tabIndex","label","camelCase"],"mappings":"ojBAiCA,IAAMA,EAAoC,SAAzBC,GAAgG,IAApEC,EAASD,EAATC,UAASC,EAAAF,EAAEG,MAAAA,OAAQ,IAAHD,EAAG,EAACA,EAAAE,EAAAJ,EAAEK,OAAAA,OAASC,IAAHF,EAAGE,EAAIF,EAAAG,EAAAP,EAAEQ,SAAAA,OAAW,IAAHD,EAAG,EAACA,EAAEE,EAAIT,EAAJS,KAAMC,EAAKV,EAALU,MACpGC,EAAiFC,IAAzEC,EAAGF,EAAHE,IAAKC,EAAGH,EAAHG,IAAKC,EAAMJ,EAANI,OAAeC,EAAaL,EAApBM,MAAiCC,EAAiBP,EAA5BQ,UAC1CF,EAAQF,EAAUC,EAAsCb,GAAUa,EAClEG,EAAYJ,EAAUG,EAA0Cf,GAAUe,EAChFE,EAWIC,IAVFC,EAAMF,EAANE,OACAC,EAASH,EAATG,UACAC,EAAcJ,EAAdI,eACAC,EAAQL,EAARK,SACAC,EAAQN,EAARM,SACAC,EAAOP,EAAPO,QACAC,EAAWR,EAAXQ,YACAC,EAAST,EAATS,UACAC,EAAkBV,EAAlBU,mBACAC,EAAeX,EAAfW,gBAEFC,EAA+CC,IAAvCC,EAASF,EAATE,UAAWC,EAAUH,EAAVG,WAAYC,EAAWJ,EAAXI,YACzBC,EAAMC,EAAO,MAuBnB,SAASC,IACPH,EAAY,MACZI,SAASC,oBAAoB,cAAepC,GAC5CmC,SAASC,oBAAoB,YAAaF,EAC5C,CAQA,OANAG,GAAU,WACJf,IAAYxB,GAASkC,GAAOA,EAAIM,SAClCN,EAAIM,QAAQC,OAEhB,GAAG,CAACjB,EAASxB,IAGX0C,EAACC,cAAAC,EACC,CAAAC,KAAM1B,IAAWnB,GAASuB,IAAavB,EACvC8C,QAASpB,EAAY,KAAOV,EAC5BX,SAAS,MACT0C,UAAWC,EACXC,sCAAsC,GAEtCP,EAAAC,cAAA,MAAA,CAAA,aACcvB,EAAS,kBACJC,EAAc,gBAChBX,EACA,gBAAAC,EACA,gBAAAG,mBACCE,EAAS,gBACVM,EACfxB,UAAWoD,EACTC,EAAOC,MACPC,EAASF,EAAQ5C,GACjB8C,EAASF,EAAQ7C,GAAKgD,EAAAA,EAAAA,EAAA,CAAA,EAEnBH,EAAO5B,SAAWA,IAAavB,GAC/BmD,EAAO3B,QAAUA,GACjB2B,EAAOI,kBAAoBjC,GAE9BxB,GAEW,cAAA2B,EAAW,SAAA+B,OAAUxD,IAClCyD,QAxDN,WACEzB,EAAWhC,GACX+B,EAAU/B,EACZ,EAsDM0D,OA9DN,WACE1B,EAAW,MACXD,EAAU,KACZ,EA4DM4B,cAjDN,SAA2BC,GACzBA,EAAEC,kBACF5B,EAAYjC,GACZqC,SAASyB,iBAAiB,cAAe5D,GACzCmC,SAASyB,iBAAiB,YAAa1B,EACzC,EA6CM2B,eAtDN,WACEhC,EAAU,KACZ,EAqDMG,IAAKA,EACL8B,KAAK,SACLC,MAAO,CAAEC,KAAI,GAAAV,OAAKnD,EAAQ,MAC1B8D,SAAU7C,GAAY,EAAI,GAEzBI,GACCgB,EAAAC,cAAA,QAAA,CACE7C,UAAWoD,EACTC,EAAOiB,MACPf,EAASF,EAAQkB,EAAU,SAAWzC,IACtCyB,EAASF,EAAQkB,EAAU,YAAc1C,MAG1CX,IAMb"}