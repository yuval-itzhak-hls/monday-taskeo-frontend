import{slicedToArray as e,toConsumableArray as t,defineProperty as i}from"../../../../../_virtual/_rollupPluginBabelHelpers.js";import{camelCase as n}from"lodash-es";import{getStyle as a}from"../../../../helpers/typesciptCssModulesHelper.js";import{getTestId as o,ComponentDefaultTestId as r}from"../../../../tests/testIds.js";import l from"classnames";import{keyCodes as s}from"../../../../constants/keyCodes.js";import c,{useState as m,useRef as d,useCallback as p,useEffect as u,useMemo as f}from"react";import{SwitchTransition as v,CSSTransition as y}from"react-transition-group";import _ from"../../../../hooks/useEventListener/index.js";import E from"../../../../hooks/useKeyEvent/index.js";import x from"../../../Icon/Icon.js";import b from"../../../Divider/Divider.js";import{NOOP as N}from"../../../../utils/function-utils.js";import C from"../../../HiddenText/HiddenText.js";import I from"../../../Clickable/Clickable.js";import S from"./StepIndicator.module.scss.js";import k from"../../../../../icons/dist/react/Check.js";var T=[s.ENTER,s.SPACE],j=function(e){var t=e.fulfilledStepIcon,i=e.fulfilledStepIconType;return"fulfilled"!==e.status||e.isFulfilledStepDisplayNumber?c.createElement(c.Fragment,null,e.stepNumber):c.createElement(x,{icon:t,className:l(S.numberContainerTextCheckIcon),iconType:i,ignoreFocusStyle:!0,ariaHidden:!0})},A=function(s){var x=s.stepComponentClassName,A=s.stepNumber,g=void 0===A?1:A,D=s.status,h=void 0===D?"pending":D,w=s.titleText,F=void 0===w?"Heading text":w,H=s.subtitleText,P=void 0===H?"Subtitle text":H,L=s.type,z=void 0===L?"primary":L,B=s.fulfilledStepIcon,R=void 0===B?k:B,V=s.fulfilledStepIconType,K=void 0===V?"svg":V,M=s.isFulfilledStepDisplayNumber,O=void 0!==M&&M,q=s.onClick,G=void 0===q?N:q,J=s.isFollowedByDivider,Q=void 0!==J&&J,U=s.stepDividerClassName,W=s.isVertical,X=void 0!==W&&W,Y=s.id,Z=s.size,$=void 0===Z?"regular":Z,ee=s["data-testid"],te=m(!1),ie=e(te,2),ne=ie[0],ae=ie[1],oe=d(null),re=d(h),le=p((function(){ae(!0)}),[ae]),se=p((function(){ae(!1)}),[ae]),ce=p((function(){return re.current!==h}),[re,h]),me=p((function(){G&&G(g)}),[G,g]);_({eventName:"animationend",callback:se,ref:oe}),E({keys:T,callback:me,ref:oe}),u((function(){ce()&&le()}),[h,ce,le]),u((function(){re.current=h}),[h]);var de=f((function(){return"Step ".concat(g,": ").concat(F," - ").concat(P,", status: ").concat(h)}),[h,F,g,P]),pe=function(e){return[a(S,n(e||"indicator")),a(S,n("type-".concat(z).concat(e))),a(S,n("status-".concat(h).concat(e))),a(S,n("size-".concat($).concat(e)))]};return c.createElement(I,{tabIndex:"-1",elementType:"li",className:l.apply(void 0,t(pe("")).concat([x,i(i(i({},S.withAnimation,ne),S.clickable,G),S.textPlacementVertical,X)])),"aria-label":de,onClick:me,"data-testid":ee||o(r.STEP_INDICATOR,Y)},c.createElement("div",{className:l.apply(void 0,t(pe("__number-divider-container")))},c.createElement("div",{className:l.apply(void 0,t(pe("__number-container"))),ref:oe,tabIndex:0,role:"button"},c.createElement(v,{mode:"out-in"},c.createElement(y,{classNames:{enter:S.swapEnter,enterActive:S.swapEnterActive,exit:S.swapExit,exitActive:S.swapExitActive},addEndListener:function(e,t){e.addEventListener("transitionend",t,!1)},key:h},c.createElement("span",{className:l.apply(void 0,t(pe("__number-container__text")))},c.createElement(j,{fulfilledStepIcon:R,fulfilledStepIconType:K,isFulfilledStepDisplayNumber:O,stepNumber:g,status:h}))))),Q&&X&&c.createElement(b,{className:l(S.divider,U)})),c.createElement("div",{className:l.apply(void 0,t(pe("__text-container")))},c.createElement("div",{className:l.apply(void 0,t(pe("__text-container__title")))},c.createElement(C,{text:h})," ",c.createElement("span",{className:l.apply(void 0,t(pe("__text-container__title__text")))},F)),"compact"!==$?c.createElement("span",{className:l.apply(void 0,t(pe("__text-container__subtitle__text")))},P):null))};export{A as default};
//# sourceMappingURL=StepIndicator.js.map
