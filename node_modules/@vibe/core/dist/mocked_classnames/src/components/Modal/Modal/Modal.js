import{slicedToArray as e,defineProperty as t}from"../../../../_virtual/_rollupPluginBabelHelpers.js";import o,{forwardRef as r,useRef as a,useState as i,useCallback as s,useMemo as n}from"react";import l from"classnames";import{RemoveScroll as m}from"react-remove-scroll";import d from"react-focus-lock";import{AnimatePresence as c,motion as f}from"framer-motion";import{getTestId as u}from"../../../tests/testIds.js";import{ComponentDefaultTestId as p}from"../../../tests/constants.js";import y from"./Modal.module.scss.js";import v from"../ModalTopActions/ModalTopActions.js";import{getStyle as E}from"../../../helpers/typesciptCssModulesHelper.js";import{camelCase as b}from"lodash-es";import{ModalProvider as j}from"../context/ModalContext.js";import{keyCodes as A}from"../../../constants/keyCodes.js";import"../../../constants/sizes.js";import{modalAnimationFullViewVariants as h,modalAnimationAnchorPopVariants as x,modalAnimationCenterPopVariants as M,modalAnimationOverlayVariants as T}from"../utils/animationVariants.js";import{createPortal as P}from"react-dom";import C from"../hooks/usePortalTarget/usePortalTarget.js";import L from"../../LayerProvider/LayerProvider.js";import k from"../../../hooks/useMergeRef.js";var I=d.default||d,N=r((function(r,d){var N=r.id,g=r.show,w=r.size,z=void 0===w?"medium":w,_=r.renderHeaderAction,B=r.closeButtonTheme,D=r.closeButtonAriaLabel,H=r.onClose,R=void 0===H?function(){}:H,O=r.anchorElementRef,V=r.alertModal,X=r.container,F=void 0===X?document.body:X,K=r.children,S=r.style,Y=r.zIndex,q=r.className,G=r["data-testid"],J=r["aria-labelledby"],Q=r["aria-describedby"],U=C(F),W=a(null),Z=k(d,W),$=a(null),ee=i(),te=e(ee,2),oe=te[0],re=te[1],ae=i(),ie=e(ae,2),se=ie[0],ne=ie[1],le=s((function(e){J||re(e)}),[J]),me=s((function(e){Q||ne(e)}),[Q]),de=n((function(){return{modalId:N,setTitleId:le,setDescriptionId:me}}),[N,le,me]),ce=s((function(e){g&&!V&&R(e)}),[g,V,R]),fe=s((function(e){e.key===A.ESCAPE&&g&&!V&&R(e)}),[V,R,g]),ue="full-view"===z?h:(null==O?void 0:O.current)?x:M;return o.createElement(c,null,g&&o.createElement(L,{layerRef:$},o.createElement(j,{value:de},P(o.createElement(I,{returnFocus:!0},o.createElement("div",{ref:$,className:y.container,style:Y?{"--monday-modal-z-index":Y}:{}},o.createElement(f.div,{variants:T,initial:"initial",animate:"enter",exit:"exit","data-testid":u(p.MODAL_NEXT_OVERLAY,N),className:y.overlay,onClick:ce,"aria-hidden":!0}),o.createElement(m,{forwardProps:!0,ref:Z},o.createElement(f.div,{variants:ue,initial:"exit",animate:"enter",exit:"exit",custom:O,className:l(y.modal,E(y,b("size-"+z)),t({},y.withHeaderAction,!!_),q),id:N,"data-testid":G||u(p.MODAL_NEXT,N),role:"dialog","aria-modal":!0,"aria-labelledby":J||oe,"aria-describedby":Q||se,style:S,onKeyDown:fe,tabIndex:-1},K,o.createElement(v,{renderAction:_,theme:B,closeButtonAriaLabel:D,onClose:R}))))),U))))}));export{N as default};
//# sourceMappingURL=Modal.js.map
