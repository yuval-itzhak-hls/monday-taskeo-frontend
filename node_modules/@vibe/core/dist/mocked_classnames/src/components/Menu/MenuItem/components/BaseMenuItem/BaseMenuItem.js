import{defineProperty as e}from"../../../../../../_virtual/_rollupPluginBabelHelpers.js";import t,{forwardRef as n,useRef as o,useEffect as s,useCallback as u}from"react";import i from"../../../../Text/Text.js";import{getTestId as r,ComponentDefaultTestId as l}from"../../../../../tests/testIds.js";import a from"classnames";import{TAB_INDEX_FOCUS_WITH_JS_ONLY as m}from"../../MenuItemConstants.js";import d from"../MenuItemSubMenuIcon/MenuItemSubMenuIcon.js";import c from"../MenuItemSubMenu/MenuItemSubMenu.js";import M from"../../hooks/useMenuItemMouseEvents.js";import I from"../../hooks/useMenuItemKeyboardEvents.js";import p from"../../../../../hooks/useMergeRef.js";import v from"../../../../../hooks/useIsMouseEnter.js";import f from"./BaseMenuItem.module.scss.js";var b=n((function(n,b){var h=n.subMenu,S=n.className,x=n.menuRef,E=n.disabled,j=void 0!==E&&E,C=n.selected,k=void 0!==C&&C,O=n.onClick,A=n.activeItemIndex,B=n.setActiveItemIndex,R=n.index,g=n.id,y=n.isParentMenuVisible,N=n.resetOpenSubMenuIndex,P=n.hasOpenSubMenu,w=n.setSubMenuIsOpenByIndex,L=n.closeMenu,V=n.useDocumentEventListeners,T=void 0!==V&&V,_=n.isInitialSelectedState,z=n.onMouseEnter,D=n.onMouseLeave,F=n.shouldScrollMenu,H=n["data-testid"],K=n.splitMenuItem,U=void 0!==K&&K,q=n.children,G=n.submenuPosition,J=void 0===G?"right":G,Q=n.autoAdjustOnSubMenuContentResize,W=(void 0===A?-1:A)===R,X=!j&&!!h&&(void 0!==y&&y)&&(W&&(void 0!==P&&P)),Y=o(null),Z=o(null),$=p(b,Y),ee=v({ref:Y}),te=v({ref:Z});s((function(){var e,t=Y.current;W&&F&&t&&(t.scrollIntoViewIfNeeded?t.scrollIntoViewIfNeeded({behaviour:"smooth"}):null===(e=t.scrollIntoView)||void 0===e||e.call(t,{behavior:"smooth",block:"center"}))}),[W,F]),s((function(){var e=Y.current;T||W&&(null==e||e.focus())}),[W,T]);var ne=M({ref:Y,splitMenuItemIconButtonRef:Z,resetOpenSubMenuIndex:N,setSubMenuIsOpenByIndex:w,isActive:W,setActiveItemIndex:B,index:R,hasChildren:!!h,splitMenuItem:U}),oe=I({onClick:O,disabled:j,isActive:W,index:R,setActiveItemIndex:B,hasChildren:!!h,shouldShowSubMenu:X,setSubMenuIsOpenByIndex:w,menuRef:x,isMouseEnter:ne,closeMenu:L,useDocumentEventListeners:T,splitMenuItem:U,isMouseEnterMenuItem:ee,isMouseEnterIconButton:te}).onClickCallback,se=u((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};w(R,!1),e.propagate&&L(e)}),[w,R,L]);return t.createElement(i,{id:g,element:"li",type:"text2","aria-haspopup":!!h||void 0,"aria-expanded":h?X:void 0,"data-testid":H||r(l.MENU_ITEM,R),className:a(f.item,S,e(e(e(e(e({},f.disabled,j),f.focused,W),f.selected,k),f.initialSelected,_),f.splitMenuItem,U)),ref:$,onClick:oe,role:"menuitem","aria-current":W,onMouseLeave:D,onMouseEnter:z,tabIndex:m},q,!!h&&t.createElement(t.Fragment,null,t.createElement(d,{ref:Z,isSplit:U,active:X,disabled:j}),t.createElement(c,{anchorRef:Y,open:X,onClose:se,autoFocusOnMount:!T,submenuPosition:J,autoAdjustOnSubMenuContentResize:Q},h)))}));export{b as default};
//# sourceMappingURL=BaseMenuItem.js.map
